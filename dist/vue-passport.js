!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define("vue-passport",["axios"],t):"object"==typeof exports?exports["vue-passport"]=t(require("axios")):e["vue-passport"]=t(e.axios)}(this,function(e){return function(e){function t(s){if(o[s])return o[s].exports;var n=o[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){var s=o(1)(o(2),o(4),null,null);e.exports=s.exports},function(e,t){e.exports=function(e,t,o,s){var n,r=e=e||{},a=typeof e["default"];"object"!==a&&"function"!==a||(n=e,r=e["default"]);var i="function"==typeof r?r.options:r;if(t&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns),o&&(i._scopeId=o),s){var l=Object.create(i.computed||null);Object.keys(s).forEach(function(e){var t=s[e];l[e]=function(){return t}}),i.computed=l}return{esModule:n,exports:r,options:i}}},function(e,t,o){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(3),r=s(n);t["default"]={name:"VuePassportLogin",props:{labels:{type:Object,"default":function(){return{title:"Login",user:"User",password:"Password",button:"Login"}}},userPlaceholder:String,passwordPlaceholder:String,controlClass:{type:String,"default":"control"},inputClass:{type:String,"default":"input"},apiUrl:{type:String,required:!0},loginRoute:{type:String,"default":"oauth/token"},userRoute:{type:String,"default":"api/user"},clientId:{type:[Number,String],"default":2},secret:{type:String,required:!0}},data:function(){return{loading:!1,login:{user:"",password:""}}},computed:{loginUrl:function(){return this.apiUrl+"/"+this.loginRoute},userUrl:function(){return this.apiUrl+"/"+this.userRoute}},methods:{getHeaders:function(e){return{Accept:"application/json",Authorization:"Bearer "+e}},handleLogin:function(){var e=this;this.loading=!0;var t={grant_type:"password",client_id:this.clientId,client_secret:this.secret,username:this.login.user,password:this.login.password,scope:""},o={};r["default"].post(this.loginUrl,t).then(function(t){o.access_token=t.data.access_token,o.refresh_token=t.data.refresh_token;var s=e.getHeaders(o.access_token);r["default"].get(e.userUrl,{headers:s}).then(function(t){o.data=t.data,e.$emit("success",{authUser:o,headers:s}),e.loading=!1})["catch"](function(t){e.$emit("failed",t),e.loading=!1})})["catch"](function(t){e.$emit("failed",t),e.loading=!1})}}}},function(t,o){t.exports=e},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("form",{on:{submit:function(t){t.preventDefault(),e.handleLogin(t)}}},[o("label",{staticClass:"label",domProps:{textContent:e._s(e.labels.user)}}),e._v(" "),o("p",{"class":e.controlClass},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.login.user,expression:"login.user"}],"class":e.inputClass,attrs:{type:"text",placeholder:e.userPlaceholder},domProps:{value:e.login.user},on:{input:function(t){t.target.composing||e.$set(e.login,"user",t.target.value)}}})]),e._v(" "),o("label",{staticClass:"label",domProps:{textContent:e._s(e.labels.password)}}),e._v(" "),o("p",{"class":e.controlClass},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.login.password,expression:"login.password"}],"class":e.inputClass,attrs:{type:"password",placeholder:e.passwordPlaceholder},domProps:{value:e.login.password},on:{input:function(t){t.target.composing||e.$set(e.login,"password",t.target.value)}}})]),e._v(" "),o("p",{staticClass:"control"},[o("button",{staticClass:"button is-primary",attrs:{type:"submit",disabled:e.loading},domProps:{textContent:e._s(e.labels.button)}})])])},staticRenderFns:[]}}])});